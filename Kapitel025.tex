\chapter{Spezifikation der Programmfunktionalit"at}
\label{chap:spezifikation}

Die Spezifikation der Software ist in dieser Arbeit in zwei Etappen aufgeteilt:
\begin{itemize}
	\item Aufstellen von Anwendungsszenarien
	\item Ableitung der notwendigen Anforderungen
\end{itemize}
Dabei ist das Ziel eine Liste mit konkreten Anforderungen an das zu erstellende Programm.
Das Aufstellen der Anwendungsszenarien dient einerseits dem Entwickler einen "Uberblick "uber die Gesamtproblematik zu erhalten.
Zus"atzlich dazu wird ersichtlich, welche Arbeitsschritte notwendig sind und wie diese zeitlich zu einander ausgef"uhrt werden.
Damit wird die vom Benutzer beabsichtigte Aktion in seine fundamentalen Bestandteile aufgeteilt.
Diese Bestandteile sind somit Funktionen die das Programm bereit stellen muss.
Es sind die zu erf"ullenden Anforderungen.

\section{Anwendungsszenarien}
\label{chap:anwendungsszenarien}

%In diesem und dem folgendem Abschnitt soll die zu erstellende Software genauer spezifiziert werden.
%In diesem und dem folgendem Abschnitt soll die Softwarespezifikation im Entwicklungsprozess beschrieben und ausgearbeitet werden.

Der erste Schritt stellt das Ausarbeiten von Szenarien dar, die eine Beschreibung eines Merkmals des Programmes aus Sicht des Anwenders ist.
%Dazu soll zun"achst eine Liste von Anwendungsf"allen ausgearbeitet werden.
%Um eine Anforderungsliste an die zu erstellende Software ausarbeiten zu k"onnen, soll zun"achst eine Liste von Anwendungsf"allen ausgearbeitet werden.
Aufgrund dieser informellen Beschreibungen h"aufiger Arbeitsabl"aufe und typischer Aufgabenstellungen wird eine "Ubersicht gewonnen, was die zu erstellende Software leisten soll und der Nutzer erwartet.
%Aus der Liste h"aufiger Arbeitsabl"aufe und typischer Aufgabenstellungen wird ersichtlich, was der Nutzer von der Software erwartet.
Mithilfe dieser Erwartungen k"onnen im Anschluss die funktionalen Anforderungen an das Programm formuliert und festgelegt werden.
Das Ergebnis ist somit die Beschreibung des notwendigen (Software-) Systemumfangs und der zu implementierenden Arbeitsprozesse.
% besonderheiten/merkmale der zu ueberpruefenden signale
% typische aufgabenstellungen
% haeufige arbeitsablaeufe

% enumerate auf a), b), usw aendern
\renewcommand{\theenumi}{\alph{enumi}}
\renewcommand{\labelenumi}{\theenumi )}
% und los geht's
Der Anwender m"ochte ...
\begin{enumerate}
	\item einen Datensatzes laden.
		  Dieser Datensatz umfasst mehrere (Bio-) Signale die sowohl mit einer konstanten Abtastrate erfasst wurden als auch Signale die nicht zu "aquidistanten Zeitpunkten abgetastet wurden.
	\item einen geladenen Datensatz mit allen "Anderungen speichern.
		  Hierbei sollen auch Einstellungen gespeichert werden, die die optische Pr"asentation wiederspiegeln.
	\item sich Informationen zu dem geladenen Datensatz und seinen beinhalteten Signalen anzeigen lassen und ver"andern.
	\item bestimmte Signale des Datensatzes ausw"ahlen und sich diese in ihrem Verlauf anzeigen lassen (Signalansicht).
		  Hierbei m"ochte er Bildschirmgr"o\ss e der einzelnen Ansichten ver"andern.
	\item die Signalansicht bez"uglich der Zeit- und der Amplitudenachse vergr"o\ss ern und verkleinern k"onnen (Zoomen).
		  Entlang der Zeitachse m"ochte er sie verschieben k"onnen (Scrollen).
		  Signaleverl"aufe die parallel aufgenommen wurden, sollen auch zusammen gescrollt werden.
	\item in einer Signalansicht mehrere Signale mit denselben Achsen darstellen lassen.
		  Beispielsweise um ein Roh- und ein verarbeitetes Signal miteinander vergleichen zu k"onnen.
	\item einen Amplitudenbereich eines Signals optisch hervorheben.
	\item einzelne Zeitpunkte im Signalverlauf mit einer Markierung versehen und kommentieren.
		  Diese Markierung kann sowohl f"ur ein bestimmtes Signal gelten, aber auch f"ur alle Signale des Datensatzes.
	\item einen Zeitabschnitt markieren. Die Markierung der Abschnitte soll analog zur Markierung von Zeitpunkten erfolgen.
	\item die Markierungen ver"andern (zeitlich verschieben, umbennen) oder l"oschen.
	\item Markierungen gemeinsam mit dem Datensatz aber auch unabh"angig vom Datensatz abspeichern.
\end{enumerate}

\section{Anforderungen an das Programm}
\label{chap:anforderungen}

Mithilfe der oben beschriebenen Anwendungsszenarien kann daraus die konkrete Funktionalit"at der Software definiert werden.
Diese Definition erfolgt durch die Bestimmung konkreter Anforderungen an das Programm.
Dabei beschreiben die Anforderungen die konkret umzusetzenden Funktionen und Arbeitswerkzeuge.
Zus"atzlich wird die in Kapitel \ref{chap:anforderungsvalidierung} beschriebene Validierung der Software die in diesem Abschnitt ausgearbeiteten Definitionen als Grundlage nehmen um das erstellte Programm zu "uberpr"ufen und zu bewerten.

%Aus den oben genannten Anwendungsf"allen ergeben sich die folgenden Anforderungen an das Programm.
Die folgende List von zu erf"ullenden Anforderungen ergibt sich aus den oben beschreibenen Anwendungsszenarien.
Wenn mehrere Einzelanforderungen in einer Beschreibung enthalten sind, sind diese mit einer Ziffer in Klammern markiert.
Das Programm ...
\renewcommand{\theenumi}{\Alph{enumi}}
\renewcommand{\labelenumi}{\theenumi )}
\newcommand{\AF}[1]{\item \label{AF:#1}}
\begin{enumerate}
	\AF{gui} muss eine grafische Benutzeroberfl"ache besitzen.
	\AF{datensatz} muss ein Datensatzformat unterst"utzen, das "aquidistant (1) und nicht "aquidistante (2) abgetastete Signale speichern kann.
	\AF{datenmanagement} soll in der Lage sein, Daten aus einem Datensatz zu laden (1).
						 Dem Nutzer muss es erm"oglicht werden, diese Signaldaten aus einer "Ubersicht auszuw"ahlen (2) und in Diagrammen darstellen zu lassen.
	\AF{dateninformation} muss dem Nutzer die M"oglichkeit bieten allgemeine Informationen sowohl "uber den Datensatz (1) als auch "uber die enthaltenen Daten (2) anzuzeigen.
	\AF{diagramm} muss in der Lage sein, die Signalverl"aufe sowohl einzeln (1) in einem Diagramm darzustellen, aber auch mehrere verschieden Signalverl"aufe (2) in ein und demselben Diagramm zu visualisieren.
				  Diese Signalansichten sollten in ihrer Darstellungsgr"o\ss e durch den Nutzer ver"anderbar sein (3).
	\AF{ansicht} soll dem Benutzer erm"oglichen, seine Signalansicht frei "`bewegen"' zu k"onnen.
				 Es muss eine Vergr"o\ss erung und Verkleinerung bez"uglich der Abszissen- und der Ordinatenachse unterst"utzen (1).
				 Zus"atzlich ist die F"ahigkeit des Verschiebens der Ansicht gefordert (2).
				 Dabei sollen mehrere Diagramme gleichzeitig Verschoben werden k"onnen (3).
	\AF{amplitudenmarkierung} muss in der Lage sein einen Amplitudenbereich ein oder mehrerer Signalansichten optisch hervorzuheben.
	\AF{annotationen} soll dem Nutzer ein Werkzeug zur Verf"ugung stellen, das ihm erlaubt Datenpunkte zu annotieren (1).
					  Diese Annotationen sollen optisch in den Signalansichten ersichtlich sein (2) und mit einem Kommentar versehen werden k"onnen (3).
				  	  Ferner ist gefordert, dass vorhandene Annotationen ver"anderbar sind (4).
	\AF{breichsannotation} soll neben der Annotation einzelner Datenpunkte auch die Markierung von Signalbereichen unterst"utzt werden.
	\AF{io} muss "Anderungen an den Signalen selbst (1) und den Annotationen (2) speichern k"onnen.
			Annotationen m"ussen unabh"angig von Signalen gespeichert werden k"onnen (3).
			Insbesondere d"urfen Annotationen sich nicht ver"andern, wenn sich das Ursprungssignal ver"andert oder nicht mehr vorhanden ist (4).
	\AF{einstellungen} soll interne Einstellungen abspeichern und von einer Sitzung zur n"achsten "ubernehmen (1).
					   Optionen bez"uglich der Darstellung von Signalen sollen in dem Datensatz mit abgespeichert werden k"onnen (2).
\end{enumerate}

Die in der Aufgabenstellung geforderte Ausbauf"ahigkeit der Programms ist nicht durch die Anwendungsszenarien abgedeckt werden.
Hierbei handelt es sich um eine nichtfunktionale Anforderung an das Programm.
Daher wird die folgenden Anforderung nur auf Basis der Aufgabenstellung formuliert und nicht aufgrund der Erwartungshaltung des Benutzers:
%Die folgende Anforderung l"asst sich nicht aus den Anwendungsf"allen erschlie\ss en, das die Erweiterbarkeit eine Forderung von zuk"unftigen Entwicklern ist und nicht die der Anwender.
%Um aber die Ausbauf"ahigkeit des Programms zu erm"oglichen, muss es 
\begin{enumerate}[resume]
	\AF{signalverarbeitung} Das Programm soll dem Benutzer erm"oglichen eine Signalverarbeitungsmethode auf ein gew"ahltes Biosignal anwenden zu k"onnen (1).
							Dabei muss das Originalsignal unver"andert bleiben (2).
							Der bearbeitete Signalverlauf kann als eigenes Signal im Datensatz abgespeichert werden (3).
							Die Implementierung dieser Anforderung soll beispielhaft f"ur zuk"unftige Entwickler erfolgen um die Erweiterbarkeit zu gew"ahrleisten.
\end{enumerate}

\section{Testszenarien}
\label{chap:testszenarien}

In diesem Abschnitt sollen Szenarien heraus gearbeitet werden, mit denen die Software am Ende der Implementierung validiert werden kann.
Dabei soll die oben geforderte Funktionalit"at anhand der Behandlung von Biosignalen "uberpr"uft werden.

Folgend sollen die Testszenarien beschrieben werden die zur Validierung der Software durchgef"uhrt werden sollen.
Die Ausgangsbedingung ist eine das einfache Starten des Programmes.
Somit soll der erste, nicht jeweils explizit genannte Schritt sein, das Programm zu starten.
Abgeschlossen wird jedes Testszenario mit dem Speichern der geladenen Daten.
\begin{description}
\item[Testszenario 1] Der Benutzer l"adt einen Datensatz abdominaler \ac{EKG}-Daten mit sieben Aufnahmekan"alen.
					  Zus"atzlich sind noch die approximierten \ac{EKG}-Signale des Fetus sowie der Mutter im Datensatz gespeichert.
					  Der Benutzer l"asst sich alle verf"ugbaren Informationen zu dem geladenem Datensatz anzeigen.
					  Anschlie\ss end l"asst er sich einen Kanal sowohl des Rohsignals als auch der beiden abgeleiteten Signale jeweils in einer eigenen Ansicht anzeigen.
					  Er verschafft sich durch eine geringe Zoomstufe einen "Uberblick "uber die Signalverl"aufe.
					  Der Benutzer zoomt auf interessante Bereiche der Aufnahme herein und vergr"o\ss ert die Ansicht der Einzelsignale.
					  Er schlie{\ss}t die Ansicht des Rohsignals.
					  Der Benutzer markiert in zwei unterschiedlichen, neu zu erstellenden Annotationskan"alen die QRS-Komplexe der Mutter, sowie des Fetus ("uber mindestens f"unf Minuten des Signalverlaufs).
					  Zur "Uberpr"ufung der Annotationen l"asst er sich alle Signale und die gemachten Annotationen in einer Signalansicht darstellen.
\item[Testszenario 2] Der Benutzer l"adt den im Testszenario abgespeicherten Datensatz wieder in das Programm.
					  Er "uberpr"uft ob die Ansichten und die Einstellungen aus dem ersten Testszenario "ubernommen wurden.
					  Der Benutzer speichert die Einstellungen der Signalansichten.
					  Er w"ahlt f"unf beliebige Annotationen aus versieht diese mit Kommentaren.
					  Der Benutzer l"oscht jede zweite Annotation des fetalen QRS-Komplexes.
					  Weiterhin soll er mindestens 10 Zeitbereiche markieren, wobei es auch zu "Uberschneidungen diese Bereiche kommen soll.
					  Er l"adt die zuvor gespeicherten Einstellungen und "uberpr"uft ob diese richtig geladen wurden.
\item[Testszenario 3] Der Benutzer l"adt den Bearbeiteten Datensatz aus dem zweiten Testszenario.
					  Er entfernt die Kan"ale der approximierten \ac{EKG}-Verl"aufe aus dem Datensatz.
					  Der Benutzer "uberpr"uft die gemachten Annotationen mithilfe des Rohsignals.
\item[Testszenario 4] Der Benutzer l"adt einen Datensatz mit \ac{EKG}-und \ac{PPG}-Signalen.
					  Er w"ahlt \ac{PPG} und \ac{EKG} Kan"ale und zeigt sie sich in einer Ansicht an.
					  Der Benutzer verschafft sich eine "Ubersicht durch eine geringe Zoomstufe "uber die Signalverl"aufe.
					  Der Benutzer markiert einen Amplitudenbereich im \ac{PPG}-Signal.
					  Er wendet eine Filterfunktion auf das \ac{EKG}-Signal an und speichert das Ergebnis im Datensatz ab.
					  Er kontrolliert die Informationen des ver"anderten Signals.
					  Der Nutzer entfernt das Original-\ac{EKG}-Signal aus dem Datensatz.
\item[Testszenario 5] Der Benutzer l"adt den Datensatz aus dem viertem Testszenario.
					  Er kontrolliert dabei die Einstellungen der Ansichten darauf, ob sie aus dem Szenario 4 "ubernommen wurden.
					  Er annotiert die QRS-Komplexe des gefiltertem \ac{EKG}-Signals f"ur mindestens f"unf Minuten des Signalverlaufs.
					  Der Benutzer wendet eine weitere Filterfunktion auf das bereits gefilterte Signal an und speichert das Ergebnis erneut im Datensatz ab.
					  Er kontrolliert die Annotationen mit dem erneut gefiltertem Signal.
\end{description}

\begin{table}[htb]
\caption[Abdeckung der Anforderungen durch die Testszenarien]{Abdeckung der Anforderungen durch die Testszenarien (TS)}
\label{tab:anforderungs_abdeckung}
\centering
\begin{tabular}{|r|c|c|c|c|c|c|c|c|c|c|c|c|c|c|c|c|c|}
	\cline{2-17}
	\multicolumn{1}{r|}{} & \multicolumn{16}{|c|}{Anforderung} \\ \cline{2-17}
	\multicolumn{1}{r|}{} & A & B1 & B2 & C1 & C2 & D1 & D2 & E1 & E2 & E3 & F1 & F2 & F3 & G & H1 & H2\\ \hline
	TS 1 & \Checkmark & \Checkmark &  & \Checkmark & \Checkmark & \Checkmark & \Checkmark & \Checkmark & \Checkmark & \Checkmark & \Checkmark & \Checkmark & \Checkmark & & \Checkmark & \Checkmark \\ \hline
	TS 2 & \Checkmark & \Checkmark & & \Checkmark & \Checkmark & & & \Checkmark & & & \Checkmark & \Checkmark & \Checkmark & & & \Checkmark \\ \hline
	TS 3 & \Checkmark & \Checkmark & & \Checkmark & \Checkmark & & & \Checkmark & & & \Checkmark & & & & & \Checkmark \\ \hline
	TS 4 & \Checkmark & \Checkmark & \Checkmark & \Checkmark & \Checkmark & & \Checkmark & \Checkmark & & \Checkmark & \Checkmark & \Checkmark & \Checkmark & \Checkmark & & \\ \hline
	TS 5 & \Checkmark & \Checkmark & \Checkmark & \Checkmark & \Checkmark & & & \Checkmark & & & \Checkmark & \Checkmark & \Checkmark & \Checkmark & & \Checkmark \\ \hline
\end{tabular}

\vspace{2ex}

\begin{tabular}{|r|c|c|c|c|c|c|c|c|c|c|c|c|c|}
	\cline{2-13}
	\multicolumn{1}{r|}{} & \multicolumn{12}{|c|}{Anforderung} \\ \cline{2-13}
	\multicolumn{1}{r|}{} & H3 & H4 & I & J1 & J2 & J3 & J4 & K1 & K2 & L1 & L2 & L3 \\ \hline
	TS 1 & & & & & \Checkmark & & & & & & & \\ \hline
	TS 2 & \Checkmark & \Checkmark & \Checkmark & & \Checkmark & & & \Checkmark & \Checkmark & & & \\ \hline
	TS 3 & & & & & & \Checkmark & \Checkmark & & \Checkmark & & & \\ \hline
	TS 4 & & & & \Checkmark & & & & & & \Checkmark & \Checkmark & \Checkmark \\ \hline
	TS 5 & & & & \Checkmark & \Checkmark & \Checkmark & \Checkmark & \Checkmark & \Checkmark & \Checkmark & \Checkmark & \Checkmark \\ \hline
\end{tabular}
\end{table}

In \ac{tab} \ref{tab:anforderungs_abdeckung} ist "ubersichtlich aufgelistet welche der Anforderungen durch die Testszenarien abgedeckt sind.
Es ist erkenntlich, dass alle Anforderungen mindestens durch ein Testszenario "uberpr"uft wird.
Durch das Bestehen der Testszenarien wird gezeigt, dass das Programm die Erwartungen des Nutzers erf"ullt.

Das Testen der Funktionalit"at mittels bestimmter Biosignale sind aber nur spezielle Einzelf"alle.
Es kann durch sie nicht die absolute Fehlerfreiheit der Software gezeigt werden.
Um entstehende Fehler schon w"ahrend der Entwicklung abfangen und beheben zu k"onnen, wird die Software bzw. die einzelnen Programmteile auch schon einzeln daraufhin getestet, dass sie sich so verhalten, wie es der Programmierer vorgesehen hat.
Speziell wird auch das korekte Verhalten im Falle eines Fehlers "uberpr"uft.
Diese fortlaufenden funktionellen Test werden in den entsprechenden Abschnitten zu den einzelnen Programmkomponenten im Kapitel \ref{chap:entwurf} beschrieben.

%-- Implementierung und Fehlerbehebung
%-- konstant fortlaufender prozess
%-- komponenten test hier nicht abgebildet und beschrieben - sind schon durch inkrementelle entwicklung gef"ordert
